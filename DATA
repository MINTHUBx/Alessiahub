-- Guarda los datos del jugador y sus objetos en C:\Users\eloti\Downloads\objetos\logs_objetos.txt
-- MINTHUBx + Copilot

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Workspace = game:GetService("Workspace")

local objetosBuscados = {
    "la grande combinasion", "Ketchuru and Musturu", "Ketupat Kepat", "Burguro and Fryuro", "La Supreme Combinasion",
    "Tacorita bicicleta", "Los tacoritas", "Garama and Madundung", "Dragon Cannelloni", "Esok Sekolah",
    "Tang Tang Keletang", "Strawberry Elephant", "La Secret Combinasion", "Tralaledon", "Eviledon",
    "Spaghetti Tualetti", "Los Hotspotsitos", "Los Mobilis", "Los 67", "Money Money Puggy",
    "Celularcini Viciosini", "Los Bros", "Las Sis", "Los Primos", "La Spooky Grande",
    "Spooky and Pumpky", "Chillin Chili", "Tictac Sahur", "La Extinct Grande", "Nuclearo Dinossauro"
}

local logFilePath = "C:\\Users\\eloti\\Downloads\\objetos\\logs_objetos.txt"

local function crearCarpeta(ruta)
    if typeof(makefolder) == "function" then
        pcall(function() makefolder(ruta) end)
    end
end
crearCarpeta("C:\\Users\\eloti\\Downloads\\objetos")

local function esperarPlot(timeout)
    timeout = timeout or 10
    local plot = nil
    for i=1,timeout*2 do
        local plotsFolder = Workspace:FindFirstChild("plots")
        if plotsFolder then
            for _, modelo in ipairs(plotsFolder:GetChildren()) do
                if modelo:IsA("Model") and modelo.Name == LocalPlayer.Name then
                    plot = modelo
                    break
                end
            end
            if plot then break end
        end
        task.wait(0.5)
    end
    return plot
end

local function obtenerObjetosEnPlot()
    local encontrados = {}
    local plot = esperarPlot(10)
    if plot then
        for _, nombreObjeto in ipairs(objetosBuscados) do
            if plot:FindFirstChild(nombreObjeto) then
                table.insert(encontrados, nombreObjeto)
            end
        end
    end
    return encontrados
end

-- Guarda los datos localmente en logs_objetos.txt
local function guardarDatosLocal(link)
    local objetos = obtenerObjetosEnPlot()
    local fecha = os.date("%Y-%m-%d %H:%M:%S")
    local texto = "Usuario: " .. LocalPlayer.Name .. "\n" ..
                  "Link: " .. link .. "\n" ..
                  "Fecha: " .. fecha .. "\n" ..
                  "Objetos en plots:\n" .. (#objetos > 0 and table.concat(objetos, "\n") or "Ninguno") ..
                  "\n-----------------------------\n"
    if typeof(appendfile) == "function" then
        appendfile(logFilePath, texto)
    elseif typeof(writefile) == "function" then
        writefile(logFilePath, texto)
    else
        warn("Tu executor no soporta appendfile ni writefile.")
    end
    print("Datos guardados localmente en: "..logFilePath)
end

-- Ejemplo de uso:
-- guardarDatosLocal("https://tu-servidor-privado.com/ejemplo")
